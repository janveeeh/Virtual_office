<!DOCTYPE html>
<html>
<style>
    .img-profile {
        height: 2rem;
        width: 2rem;
    }
    .rounded-circle {
        border-radius: 50%!important;
    }
    .topbar .topbar-divider {
        width: 0;
        border-right: 1px solid #e3e6f0;
        height: calc(4.375rem - 2rem);
        margin: auto 1rem;}
    img {
            vertical-align: middle;
            border-style: none;
        }
</style>
<head>
  <meta charset="utf-8">
  <title>Our Employees</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
  <link rel="icon" href="http://office.praedicoglobalresearch.com/public/img/logo.png" type="image/gif" sizes="16x16">
  
    <!-- Custom fonts for this template-->
    <link href="http://office.praedicoglobalresearch.com/public/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
  
    <!-- Custom styles for this template-->
    <link href="http://office.praedicoglobalresearch.com/public/css/sb-admin-2.min.css" rel="stylesheet">
  
    <link href="http://office.praedicoglobalresearch.com/public/vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">
  
    <script src="http://office.praedicoglobalresearch.com/public/vendor/jquery/jquery.min.js"></script>
    <script src="http://office.praedicoglobalresearch.com/public/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  
    <!-- Core plugin JavaScript-->
    <script src="http://office.praedicoglobalresearch.com/public/vendor/jquery-easing/jquery.easing.min.js"></script>
  
    <!-- Custom scripts for all pages-->
    <script src="http://office.praedicoglobalresearch.com/public/js/sb-admin-2.min.js"></script>
  
    <!-- Page level plugins -->
  
    <!-- Page level custom scripts -->
  
    <script src="http://office.praedicoglobalresearch.com/public/vendor/datatables/jquery.dataTables.min.js"></script>
    <script src="http://office.praedicoglobalresearch.com/public/vendor/datatables/dataTables.bootstrap4.min.js"></script>
  
    <!-- Page level custom scripts -->
  
    <script src="http://office.praedicoglobalresearch.com/public/vendor/datatables/jquery.dataTables.min.js"></script>
    <script src="http://office.praedicoglobalresearch.com/public/vendor/datatables/dataTables.bootstrap4.min.js"></script>
    <script src="http://office.praedicoglobalresearch.com/public/js/demo/datatables-demo.js"></script>
   
    <script type="text/javascript">
     $(document).ready(function() {
         $('#dataTable1').DataTable();
         $('#dataTable2').DataTable();
         $('#dataTable3').DataTable();
         $('#dataTable4').DataTable();
         $('#dataTable5').DataTable();
         $('#dataTable6').DataTable();
     } );
   </script>
   
</head>
{% include "sidebar.html" %}
 
<body id="body" style="margin-left:300px;">
  
    <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">
  
          <!-- Topbar -->
          
          <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
  
            <!-- Sidebar Toggle (Topbar) -->
            
            <span>
              <a class="" style="cursor: pointer;" onclick="toggleSidebar()"><i class="fas fa-fw fa-lg fa-bars"></i></a>
            </span>
  
            <script>
              function toggleSidebar()
              {
                $("#mySidenav").fadeToggle();
                
                var a=$("#body").css('margin-left');
                
                if(a=='300px'){
                  $("#body").css('margin-left','-=300px');

                }
                else{
                $("#body").css('margin-left','+=300px');
                }
              }
            </script>
  
            <style>
              @media only screen and (max-width: 600px) {
                #mySidenav{display: none;}
              }
            </style>
  
            <marquee style="font-family: Comic Sans MS; color: red">
              <i>"To Win in the Marketplace you must first Win in the Workplace."</i>
              <img src="http://office.praedicoglobalresearch.com/public/img/smiley.png" width="50px">
            </marquee>
            <!-- Topbar Navbar -->
            <ul class="navbar-nav ml-auto">
  
              <div class="topbar-divider d-none d-sm-block"></div>
 
              <!-- Nav Item - User Information -->
              <li class="nav-item dropdown no-arrow"style="width:150px">
                  
                <a class="nav-link " href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img class="img-profile rounded-circle" src="http://office.praedicoglobalresearch.com/public/uploads/emp/Photograph.png">
                    <span class="mr-2 d-none d-lg-inline text-gray-700 small">{{data.firstname}} {{data.lastname}}</span>
                  
                        </a>

             
                <!-- Dropdown - User Information -->
                <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
                  <a class="dropdown-item" href="#" data-toggle="modal" data-target="#profileModal">
                    <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                    Profile
                  </a>
                  <a class="dropdown-item" href="#" data-toggle="modal" data-target="#passwordModal">
                    <i class="fas fa-key fa-sm fa-fw mr-2 text-gray-400"></i>
                    Change Password
                  </a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">
                    <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                    Logout
                  </a>
                </div>
              </li>
  
            </ul>
  
          </nav>
          <!-- End of Topbar -->
  
          <!-- Begin Page Content -->
          <!-- /.container-fluid -->
  
        </div>
        <!-- End of Main Content -->
        <div class="container-fluid">
  
            
            <h4>Company Employees</h4>
  
            <hr class="divider">
              {% if data.emptype == 'head'%}
              <div class="mb-3">
                <a type="button" href="#" class="btn btn-primary shadow" data-toggle="modal" data-target="#exampleModal" >
                  Add New
                </a>
              </div>
              {% endif %}
  
              <div class="card shadow mb-4">
                <div class="card-body">
                  <div class="table-responsive">
                    <div id="dataTable_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
                        
                    </div>

                    <div class="row">
                        <div class="col-sm-12">
                            <table class="table table-bordered dataTable no-footer" id="dataTable" width="100%" cellspacing="0" role="grid" aria-describedby="dataTable_info" style="width: 100%;">
                      <thead>
                        <tr class="bg-secondary" style="color:white" role="row"><th class="sorting_asc" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Employee Details: activate to sort column descending" style="width: 908px;">Employee Details</th></tr>
                      </thead>
                
                    <tbody>
                          {% for emp in res %}              
                                        
                                        
                        <tr role="row" class="odd">
                        <td class="sorting_1">
                          <img src="http://office.praedicoglobalresearch.com/public/uploads/emp/Photograph.png" style="width:100px; height:100px; object-fit: cover; object-position:top; margin:3px;"><br>{{emp.firstname}} {{emp.lastname}}<br>
                          <a href="#">{{emp.empid}}</a>
                            
                        </td>
  
                      </tr>
                        {% endfor %}
                    
                    </tbody>
                  </table>
                </div>
            </div>
        </div>
       
          </div>
          <!-- /.container-fluid -->
  
        </div>
        <!-- End of Main Content -->
      
      
        <!-- Footer -->
            
      <footer class="sticky-footer bg-white">
          <div class="container my-auto">
            <div class="copyright text-center my-auto">
              <span>Copyright © Praedico Global Research Pvt. Ltd. 2019</span>
            </div>
          </div>
        </footer>      <!-- End of Footer -->
  
      
      <!-- End of Content Wrapper -->
  
    </div>
       
            
      
      <!-- End of Content Wrapper -->
  
  



</body>


  <!-- -----addnewemployee model start- -->
    <div class="modal fade"  id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalCenterTitle">Add New Employee</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form id='addnewemployee' method="post" enctype="application/x-www-form-urlencoded">{% csrf_token %}
              <div class="form-row">
                <div class="form-group col-md-4">
                  <label>First Name</label>
                  <input type="text" class="form-control" required id="firstname" name="firstname" placeholder="First Name">
                </div>
                <div class="form-group col-md-4">
                    <label>Last Name</label>
                    <input type="text" class="form-control" required id="lastname" name="lastname" placeholder="Last Name">
                  </div>
                  <div class="form-group col-md-4">
                    <label>Email Id</label>
                    <input type="Email" class="form-control" required id="emailid" name="emailid" placeholder="Email Id">
                  </div>  
              </div>
              <div class="form-row">
                <div class="form-group col-md-4">
                  <label>Pincode</label>
                  <input type="text" class="form-control" id="pincode" name="pincode" placeholder="Pincode">
                </div>
                <div class="form-group col-md-4">
                    <label>Contact Number</label>
                    <input type="text" class="form-control" required id="contactnumber" name="contactnumber" placeholder="Contact Number">
                  </div>
                <div class="form-group col-md-4">
                    <label>Aadhaar Number</label>
                    <input type="text" class="form-control" id="aadhaarnumber" name="aadhaarnumber" placeholder="Aadhaar Number">
              </div>
    
              </div>
              <div class="form-row">
                <div class="form-group col-md-12">
                  <label>Address</label>
                  <input type="text" class="form-control" id="address" name="address" placeholder="Address">
                </div>
                
    
              </div>
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label>City</label>
                  <select class="form-control" id="city" name="city"  >
                    
                    <option selected disabled >-select city-</option>
                    {% for city in all_cities %}
                    <option  value={{city.city}}>{{city.city}}</option>
                    {% endfor %}  
                  </select>

                  
                </div>
                <div class="form-group col-md-6">
                    <label>Institute</label>
                    <select class="form-control" id="institute" name="institute" >
                    
                      <option selected disabled >-select institute-</option>
                      {% for institute in all_institute %}
                      <option  value={{institute.institute}}>{{institute.institute}}</option>
                      {% endfor %}  
                    </select>
  
                  </div>
                
    
              </div>
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label>Description</label>
                  <input type="text" class="form-control" id="description" name="description" placeholder="Description">
                </div>
                <div class="form-group col-md-6">
                  <label>Employee Type</label>
                  <input type="text" class="form-control" id="employeetype" name="employeetype" placeholder="Employee Type">
                </div>
    
              </div>

              
              <div class="form-row">
                <div class="form-group col-md-12">
                  <label>Team Head</label>
                  <input type="text" readonly class="form-control" id="teamhead" name="teamhead"  placeholder="{{data.firstname}} {{data.lastname}}">
                </div>
                
                
                  
              </div>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label>Start date</label>
                  <input type="date" class="form-control" required id="startdate" name="startdate" >
                </div>
                
                <div class="form-group col-md-6">
                    <label>End date</label>
                    <input type="date" class="form-control" required id="enddate" name="enddate">
                  </div>
                  
              </div>

          </div>
          <div class="modal-footer">
            <button type="reset" class="btn btn-secondary" >Clear</button>
            <button type="submit" class="btn btn-primary" >Register</button>
          </div>
        </form>
        </div>
      </div>
    </div>


    <!-- -----addnewemployee model end- -->



     <!-- password modal -->
  <div class="modal fade"  id="passwordModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalToggle" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalToggle">Change Password </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            
          <form id='changepwd' method="post" enctype="application/x-www-form-urlencoded">{% csrf_token %}
              <div class="form-row">
              
                  <div class="form-group col-md-12">
                    <label for="inputEmail4">Current Password</label>
                    <input type="password" class="form-control" id="currentpwd" name="currentpwd" placeholder="Current Password">
                  </div>
                
                  <div class="form-group col-md-12">
                    <label for="inputEmail4">New password</label><br>
                    <input type="password" class="form-control" id="newpwd" name="newpwd" placeholder="New password">
                 </div>
                
                 <div class="form-group col-md-12">
                    <label for="inputEmail4">Confirm password</label><br>
                    <input type="password" class="form-control" id="confirmpwd" name="confirmpwd" onkeyup="chk()" placeholder="Re-enter Password">
                    <span id="msg"></span> 
                </div>
                  
                </div>
               
          
        </div>
        <div class="modal-footer">
          <button type="button" data-dismiss="modal" class="btn btn-secondary" >Close</button>
          <button type="submit" class="btn btn-primary" >Update</button>
        </div>
      </form>
          </div>
         </div>     
        </div>



    <!-- Logout Modal-->
    
      
    
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body"><i style="color:green; font-family: Comic Sans MS;"><b>Good Job... You have no pending Task.</b> <span class="fas fa-thumbs-up" style="font-size:25px;"></span></i></div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <a class="btn btn-primary" href="/logout">Logout</a>
          </div>
        </div>
      </div>
    </div>


           <!-- Profile Modal-->


           <div class="modal fade"  id="profileModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalCenterTitle">{{data.firstname}}'s Profile</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form id='updateprofile' method="post" enctype="application/x-www-form-urlencoded">{% csrf_token %}
                    <div class="container-fluid">
                      {% if data.emptype == 'head'%}
                      <h4 class="mt-2">Team Head</h4>
                      {% endif %}
                        <div class="card shadow mb-4">
                        <div class="card-body">
                          <div class="row">
                    
                     <div class="col-md-5">
                    
                      <center>
                        <style type="text/css">
                          .image:hover .img{
                            opacity:0.5;
                          }
                          #upload{
                            display: none;
                          }
                        </style>
                        
                        <div style="border:3px solid #FF7456; width:215px; border-radius:50%;" class="image">
                            <input id="upload" type="file"  name="userDP" onchange="#" />
                          <a href="#" id="upload_link" class="img">
                            <img src="http://office.praedicoglobalresearch.com/public/uploads/emp/Photograph.png" style="width:200px; height:200px; border-radius:50%; object-fit: cover; object-position:top; margin:3px;">
                          </a>
                          
                        </div>
      
                        <h3 class="mt-3" style="color:#FF7456;">{{data.firstname}} {{data.lastname}}</h3>
                      </center>
                  
                      
      
                    </div>
      
                    <div class="col-md-6">
                      <table cellpadding="10"  style="width:100%;">
                        <tbody>
                          <tr style="border-bottom:1px solid #FF7456; border-top:2px solid lightgrey;">
                            <th style="color:#FF7456;">ID</th>
                            <td>
                              <i type="email" readonly  class="" value="{{data.empid}}" required style="width:85%; border-radius: 5px">{{data.empid}}</i>
      
                            </td>
                          </tr>
      
                          <tr style="border-bottom:1px solid #FF7456;">
                            <th style="color:#FF7456;">Email Id</th>
                            <td>
                            <input type="email" name="emailid" value="{{data.emailid}}" required style="width:85%; border-radius: 5px">                    
                            </td>
                          </tr>
      
                          <tr style="border-bottom:1px solid #FF7456;">
                            <th style="color:#FF7456;">Contact</th>
                            <td>
                            <input type="text" name="contactnumber" value="{{data.contact}}" required style="width:85%; border-radius: 5px">                    
                            </td>
                          </tr>
      
                          <tr style="border-bottom:1px solid #FF7456;">
                            <th style="color:#FF7456;">Address</th>
                            <td>
                            <input type="text" name="address" value="{{data.address}}" required style="width:85%; border-radius: 5px">                    
                            </td>
                          </tr>
      
                          <tr style="border-bottom:1px solid #FF7456;">
                            <th style="color:#FF7456;">Pincode</th>
                            <td>
                            <input type="text" name="pincode" value="{{data.pincode}}" required style="width:85%; border-radius: 5px">                    
                            </td>
                          </tr>
      
                          <tr style="border-bottom:1px solid #FF7456;">
                            <th style="color:#FF7456;">Aadhaar</th>
                            <td>
                            <input type="text" name="aadhaar" value="{{data.aadhaar}}" required style="width:85%; border-radius: 5px">                    
                            </td>
                          </tr>
      
                         
                          <tr style="border-bottom:1px solid #FF7456;">
                            <th style="color:#FF7456;">Description</th>
                            <td>
                            <i readonly   required style="width:85%; border-radius: 5px">{{data.description}}</i>                   
                            </td>
                          </tr>
                         
                         
                          
                        </tbody>
                      </table>
                    </div>
                    
                    </div>
                  </div>
                 </div>     
                </div>
                
                    <!-- /.container-fluid -->
            
          
                <div class="modal-footer">
                  <button type="button" data-dismiss="modal" class="btn btn-secondary" >Close</button>
                  <button type="submit" class="btn btn-primary" >Update</button>
                </div>
             
              </form>
              </div>
            </div>
          </div>
      


    <script type="text/javascript">
        $(document).ready(function() {
            $('#dataTable1').DataTable();
            $('#dataTable2').DataTable();
            $('#dataTable3').DataTable();
            $('#dataTable4').DataTable();
            $('#dataTable5').DataTable();
            $('#dataTable6').DataTable();
        } );
      </script>
    <script>
      
  $("#addnewemployee").submit(function (e) {
    // preventing from page reload and default actions
    e.preventDefault();
    // serialize the data for sending the form data.
    var serializedData = $(this).serialize();
    
    // make POST ajax call
    $.ajax({
        type: 'POST',
        url: "{% url 'head-addnewemployee' %}",
        data: serializedData,
        success: function (response) {
          // console.log(response)
          window.location.reload();
          alert("Registration Successfull")

          
        },
        error: function (response) {
            // alert the error if any error occured
            window.location.reload();
            alert(response["responseJSON"]["error"]);
        }
    })
})
    </script>
    <script>
      
      $("#updateprofile").submit(function (e) {
        // preventing from page reload and default actions
        e.preventDefault();
        // serialize the data for sending the form data.
        var serializedData = $(this).serialize();
        
        // make POST ajax call
        $.ajax({
            type: 'POST',
            url: "{% url 'updateprofile' %}",
            data: serializedData,
            success: function (response) {
              // console.log(response)
              window.location.reload();
              alert("Updated Successfully")
    
              
            },
            error: function (response) {
                // alert the error if any error occured
                window.location.reload();
                alert(response["responseJSON"]["error"]);
            }
        })
    })
        </script>
    
    

        <script>
          function chk(){
            if(newpwd.value==confirmpwd.value)
            {msg.innerHTML = "<font color='green'>Password Matched</font>"}
            else
            {msg.innerHTML = "<font color='red'>Password not matched</font>"}
          
            }    
          
            $("#changepwd").submit(function (e) {
              
                // preventing from page reload and default actions
                e.preventDefault();
                // serialize the data for sending the form data.
                var serializedData = $(this).serialize();
                
                // make POST ajax call
                $.ajax({
                    type: 'POST',
                    url: "{% url 'changepassword' %}",
                    data: serializedData,
                    success: function (response) {
                      // console.log(response)
                      window.location.reload();
                      alert("Password Updated Successfully")
            
                      
                    },
                    error: function (response) {
                        // alert the error if any error occured
                        //alert(response["responseJSON"]["error"]);
                        alert("Some Unknown Error Occured Please try after sometime..")
                        window.location.reload();
                    }
                })
            })
          </script>
</html>

